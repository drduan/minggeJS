(function(){var t,e,n,r,i,o,a,u,h,s,c,l,f,p,d,v={}.hasOwnProperty,g=function(t,e){function n(){this.constructor=t}for(var r in e)v.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};d=function(t,e){var n,r;null==e&&(e={});for(n in t)r=t[n],e[n]=r;return e},u={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},h={};for(e in u)n=u[e],h[n]=e;a=function(t){return t.replace(/[&<>"']/g,function(t){return"&"+h[t]+";"})},r=/^multiple|selected|checked|disabled|required|open$/,o="function"==typeof document.querySelectorAll,t={},t.Node=function(){function e(e){var n,r,i,o,a,u,s,c,l,f,p,d;if(this.handlers={},this.events={},this.length=0,e instanceof t.Node)return e;if("string"==typeof e)if("<"!==e.charAt(0))for(r=e.split(" "),s=r.shift(),a=document.createElement((u=s.match(/^([^\.^#]+)/))?u[1]:"div"),(u=s.match(/\.([^\.^#]+)/g))&&(a.className=u.join(" ").replace(/\./g,"")),(u=s.match(/#([^\.^#]+)/))&&(a.id=u[1]),h(this,a),c=0,f=r.length;f>c;c++)n=r[c],"#"!==n.charAt(0)&&(u=n.match(/^([^=]+)(?:=(['"])(.+?)\2)?$/))&&this.attr(u[1],u[3]||u[1]);else for(o=document.createElement("div"),o.innerHTML="<div>&#160;</div>"+e,o.removeChild(o.firstChild),d=o.childNodes,l=0,p=d.length;p>l;l++)i=d[l],h(this,i);else h(this,e)}var n,i,u,h,s,c;return h=function(t,e){var n,r,i,o;for(e.nodeName&&(e=[e]),o=[],r=0,i=e.length;i>r;r++)n=e[r],n._node=t,o.push(c(t,n));return o},c=function(t,e){return t[t.length]=e,t.length+=1},s=function(t,e){var n,r,i;return i=function(){var i,o,a;for(a=[],n=i=0,o=t.length;o>i;n=++i)r=t[n],a.push(e.call(r,n,r));return a}(),i[0]},n=window.document.addEventListener?function(t,e,n){return t.addEventListener(e,n,!1)}:function(t,e,n){return t.attachEvent("on"+e,n)},i=function(t,e){var n;return n=function(n,r){var i,o,a,u;n.preventDefault||(n.preventDefault=function(){return n.returnValue=!1}),n.stopPropagation||(n.stopPropagation=function(){return n.cancelBubble=!0}),n.target||(n.target=n.srcElement||document),null==n.defaultPrevented&&(u=n.preventDefault,n.preventDefault=function(){return n.defaultPrevented=!0,u.call(n)},n.defaultPrevented=!1),n.isDefaultPrevented=function(){return n.defaultPrevented||n.returnValue===!1},i=d(e[r||n.type]||[]);for(a in i)o=i[a],o.call(t,n);return delete n.preventDefault,delete n.stopPropagation,delete n.isDefaultPrevented},n.elem=t,n.handleds=[],n},u=/^focus$/,e.prototype.attr=function(t,e){return t=t.toLowerCase(),t.match(/^val|value$/)?this.val(e):t.match(r)?null!=e?(e?s(this,function(){return this.setAttribute(t,t),this[t]=!0}):s(this,function(){return this.removeAttribute(t),this[t]=!1}),this):this[0][t]:null!=e?(s(this,function(){return this.setAttribute(t,e)}),this):this[0].getAttribute(t,2)},e.prototype.append=function(e){return"string"==typeof e&&(e=new t.Node(e)),s(this,function(t,n){return s(e,function(t,e){return n.appendChild(e)})}),this},e.prototype.empty=function(){return s(this,function(){var t;for(t=[];this.firstChild;)t.push(this.removeChild(this.firstChild));return t}),this},e.prototype.html=function(t){return null!=t?(this.empty(),s(this,function(){return this.innerHTML=t}),this):this[0].innerHTML},e.prototype.text=function(t){return null!=t?this.html(a(t)):this.html()},e.prototype.on=function(t,e){var r,o;return o=this,(r=this.events)[t]||(r[t]=[]),this.events[t].push(e),s(this,function(e){var r,a,u;return a=(u=o.handlers)[e]||(u[e]=i(this,o.events)),r=a.handleds,-1===r.indexOf(t)?(n(this,t,a),r.push(t)):void 0}),this},e.prototype.trigger=function(t,e){var n;return null==e&&(e={}),t.match(u)&&(n=!0),s(this,function(){var r,i,o;r=document.createEvent("HTMLEvents"),r.initEvent(t,!0,!0);for(i in e)o=e[i],r[i]=o;return this.dispatchEvent(r),n?this[t]():void 0}),this},e.prototype.remove=function(){return s(this,function(){return this.parentNode?this.parentNode.removeChild(this):void 0}),this},e.prototype.replaceWith=function(e){return"string"==typeof e&&(e=new t.Node(e)),s(this,function(t,n){return s(e,function(t,e){return n.parentNode?n.parentNode.replaceChild(e,n):void 0})}),this},e.prototype.val=function(t){return null!=t?(s(this,function(){return this.value=t}),this):this[0].value},e.prototype.parent=function(){var e;return(e=this[0].parentNode)?e._node||new t.Node(e):void 0},e.prototype.find=function(e){var n;return n=o?this[0].querySelector(e):this[0].getElementsByTagName(e),n?n._node||new t.Node(n):void 0},e}(),f=function(t,e){return t._childs=[],null!=e?(-1===e._childs.indexOf(t)&&e._childs.push(t),t._parent=e):void 0},p=function(e,n){var r,i;return e._data[n]instanceof t.Scope&&(i=e._data[n],null!=i._parent&&(r=i._parent._childs.indexOf(i),i._parent._childs.splice(r,1))),c(e,e._data[n],n,"$delete")},c=function(t,e,n,r){var i,o,a,u,h,l,f,p,d;if("string"==typeof r&&"$"===r.charAt(0))return s(t,e,n,r);if(t._watches[r])for(f=t._watches[r],a=0,h=f.length;h>a;a++)o=f[a],o.call(t,e,n,r);for(p=t._childs,d=[],u=0,l=p.length;l>u;u++)i=p[u],null==i._data[r]?d.push(c(i,e,n,r)):d.push(void 0);return d},s=function(t,e,n,r){var i,o,a,u,h;if(t._watches[r]){for(u=t._watches[r],h=[],o=0,a=u.length;a>o;o++)i=u[o],h.push(i.call(t,e,r,n));return h}},i=/^([^\.]+)\.(.+)$/,t.Scope=function(){function e(e,n){var r,i;if(e instanceof t.Scope)return e;if(null!=e.length)return new t.ArrayScope(e,n);f(this,n),this._watches={},this._data={};for(r in e)i=e[r],this.set(r,i)}return e.prototype.get=function(t){var e,n;return this._watch_lists&&-1===this._watch_lists.indexOf(t)&&this._watch_lists.push(t),"string"==typeof t&&(e=t.match(i))?this.get(e[1]).get(e[2]):"$parent"===t?this._parent:(n=this._data[t],null==n&&null!=this._parent&&(n=this._parent.get(t)),n)},e.prototype.set=function(e,n){var r,o;return"string"==typeof e&&(o=e.match(i))?this.get(o[1]).set(o[2],n):("string"!=typeof e||"$"!==e.charAt(0))&&("object"==typeof n&&(n=new t.Scope(n,this)),this._data[e]!==n&&(r=this._data[e],this._data[e]=n,null==r&&c(this,n,e,"$add"),c(this,n,r,e))),this},e.prototype.remove=function(t){var e;return"string"==typeof t&&(e=t.match(i))?this.get(e[1]).remove(e[2]):(p(this,t),delete this._data[t]),this},e.prototype.$watch=function(t,e){var n,r;return"string"==typeof t&&(n=t.match(i))?this.get(n[1]).$watch(n[2],e):((r=this._watches)[t]||(r[t]=[]),this._watches[t].push(e)),this},e.prototype.$startGetWatches=function(){return this._watch_lists=[]},e.prototype.$stopGetWatches=function(){var t,e;return t=function(){var t,n,r,i;for(r=this._watch_lists,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e);return i}.call(this),delete this._watch_lists,t},e}(),l=function(t,e){var n,r;return r=t._data.length,n=e.call(t),c(t,t._data.length,r,"length"),n},t.ArrayScope=function(e){function n(e,n){var r,i,o,a;if(e instanceof t.Scope)return e;if(null==e.length)return new t.Scope(e,n);for(f(this,n),this._watches={},this._data=[],r=o=0,a=e.length;a>o;r=++o)i=e[r],this.set(r,i)}return g(n,e),n.prototype.length=function(){return this._data.length},n.prototype.indexOf=function(t){return this._data.indexOf(t)},n.prototype.remove=function(t){return l(this,function(){return p(this,t),this._data.splice(t,1)})},n.prototype.each=function(t){var e,n,r,i,o;for(o=this._data,e=r=0,i=o.length;i>r;e=++r)n=o[e],t.call(this,this.get(e),e);return this},n.prototype.pop=function(){return this.remove(this._data.length-1)[0]},n.prototype.shift=function(){return this.remove(0)[0]},n.prototype.push=function(){var t;return t=arguments,l(this,function(){var e,n,r;for(n=0,r=t.length;r>n;n++)e=t[n],this.set(this._data.length,e);return this._data.length})},n.prototype.unshift=function(){var t,e,n,r;return r=this._data.length,this.push.apply(this,arguments),n=function(){var n,i,o,a;for(o=this._data,a=[],t=n=0,i=o.length;i>n;t=++n)e=o[t],r>t?a.push(t+arguments.length):a.push(t-r);return a}.apply(this,arguments),c(this,n,null,"$move"),c(this,this._data.length,r,"length"),this._data.length},n.prototype.reverse=function(){var t,e,n;return this._data.reverse(),n=function(){var n,r,i,o;for(i=this._data,o=[],t=n=0,r=i.length;r>n;t=++n)e=i[t],o.push(this._data.length-1-t);return o}.call(this),c(this,n,null,"$move"),this},n.prototype.sort=function(t){var e,n,r,i,o;return i=this,o=function(){var t,r,i,o;for(i=this._data,o=[],e=t=0,r=i.length;r>t;e=++t)n=i[e],o.push({e:n,o:e});return o}.call(this),o.sort(function(e,n){return t.call(i,e.e,n.e)}),r=[],this._data=function(){var t,i,a;for(a=[],e=t=0,i=o.length;i>t;e=++t)n=o[e],r[n.o]=e,a.push(n.e);return a}(),c(this,r,null,"$move"),this},n.prototype.filter=function(t){var e,n,r,i,o,a,u,h,s,c;for(r=[],h=this._data,e=i=0,a=h.length;a>i;e=++i)n=h[e],t.call(this,n,e)||r.push(e);for(s=r.reverse(),c=[],o=0,u=s.length;u>o;o++)e=s[o],c.push(this.remove(e));return c},n}(t.Scope),t.defineController=function(e){var n,i,o,a,u,h,s,c,l,f,p,v,g,m,_,y;return _=function(e,n,r,o,a){var u,h,s,c,w,$,S,b,N,A;if(n instanceof t.ArrayScope)return y(e,n,r,o,a);if(a["@controller"])return w=d(a),c=new a["@controller"](n,e),delete w["@controller"],_(c,n,r,o,w);A=m(e,r,o),N=[];for(S in a)if(u=a[S],"@"===S.charAt(0)){if(b=S.toLowerCase().match(/^@(\w+)(?: (\S+))?$/))switch(b[1]){case"on":(h=u.match(i))&&(s=g(e,h[1]),r.on(b[2],function(t){return s.call(A,t)}));break;case"html":case"text":f(e,r,b[1],n,A,u);break;case"val":v(e,r,n,A,u);break;case"attr":l(e,r,b[2],n,A,u);break;case"class":l(e,r,b[1],n,A,u);break;case"child":_(e,n.get(b[2]),r,o,u);break;case"if":p(e,r,b[1],n,A,u);break;case"unless":p(e,r,b[1],n,A,u,!0)}}else b=S.match(/^(.*?)(?: \$(\S+))?(?: \#.*)?$/),$=new t.Node(b[1]),b[2]&&(o["$"+b[2]]=$),N.push($),r.append($),"object"==typeof u?_(e,n,$,o,u):f(e,$,"text",n,A,u);return N},y=function(t,e,n,r,i){var o,a;return n.empty(),a=[],o=function(e,o,u){var h;return h=d(r),a[u]=_(t,e,n,h,i)},e.$watch("$add",o),e.$watch("$delete",function(t,e,n){var r,i,o,u,h;for(i=a.splice(n,1)[0],h=[],o=0,u=i.length;u>o;o++)r=i[o],h.push(r.remove());return h}),e.$watch("$move",function(t){var e,r,i,o,u,h,s,c,l,f;for(l=[],o=u=0,s=t.length;s>u;o=++u)e=t[o],l[e]=a[o];for(a=l,n.empty(),f=[],h=0,c=a.length;c>h;h++)i=a[h],f.push(function(){var t,e,o;for(o=[],t=0,e=i.length;e>t;t++)r=i[t],o.push(n.append(r));return o}());return f}),e.each(function(t,e){return o.call({},t,null,e)})},m=function(t,e,n){var r,i,o,a,u,h,s;for(o={$node:function(t){return null!=t?"$"===t.charAt(0)?n[t]:n.$root.find(t):e}},h=t,r=o;h;){s=h.methods;for(u in s)a=s[u],i=a.bind(o),r[u]=i,o[u]||(o[u]=i);(h=h._parent)&&(r=r.$parent={})}return o},f=function(t,e,r,i,o,a){return n(t,i,o,a,function(t){return e[r].call(e,t)})},c=/^class$/,l=function(t,e,i,o,a,u){var s,l,f,p;return l=i.match(c)&&(s=e.attr(i))?s+" ":void 0,n(t,o,a,u,function(t){return null!=l&&(t=l+t),e.attr(i,t)}),i.match(r)&&(f=u.match(h))?(p=function(){return o.set(f[1],e.attr(i))},e.on("click",p)):void 0},v=function(t,e,n,r,o){var a,u,s,c,l,p,d,v,m;if(c=o.match(h))a=function(){return e.val(n.get(c[1]))},l=function(){return n.set(c[1],e.val())};else{if(!(c=o.match(i)))return f(t,_root,"val",n,r,child);s=g(t,c[1]),a=function(){return e.val(s.call(r))},l=function(){return s.call(r,e.val())}}for(e.on("change",l),e.on("keyup",l),n.$startGetWatches(),a.call(n),v=n.$stopGetWatches(),m=[],p=0,d=v.length;d>p;p++)u=v[p],m.push(n.$watch(u,a));return m},p=function(e,r,i,o,a,u,h){var s,c,l;return null==h&&(h=!1),s=l=r,c=new t.Node("<!-- -->"),n(e,o,a,u,function(t){return h&&(t=!t),t?(s.replaceWith(l),s=l):(s.replaceWith(c),s=c)},!0)},u=/\{\{([\S^\}]+?)\}\}/g,a=/^\{\{([\S^\}]+?)\}\}$/,s=/@(\S+)/g,h=/^@(\S+)$/,o=/(\w\S*)\(\)/g,i=/^(\w\S*)\(\)$/,n=function(t,e,n,r,c,l){var ct,f,p,d,mm,v,sc,m,_,y,w,$;for(null==l&&(l=!1),p=[],m=(v=r.match(i))?(d=g(t,v[1]),function(){return c.call({},d.call(n))}):(v=r.match(h))?function(){return c.call({},this.get(v[1]))}:(v=r.match(u))?function(){var e;return e=this,c.call({},r.replace(u,function(r){return r=r.match(a),(v=r[1].match(i))?(d=g(t,v[1]),d.call(n)):(v=r[1].match(h))?e.get(v[1]):void 0}))}:l?(ct=n,sc=e,mm={},r=r.replace(o,function(e){return e=e.match(i),mm[e[1]]=g(t,e[1]),'mm["'+e[1]+'"].call(ct)'}),r=r.replace(s,function(t){return t=t.match(h),'sc.get("'+t[1]+'")'}),function(){return c.call({},eval(r))}):function(){return c.call({},r)},e.$startGetWatches(),m.call(e),w=e.$stopGetWatches(),$=[],_=0,y=w.length;y>_;_++)f=w[_],$.push(e.$watch(f,m));return $},g=function(t,e){var n,r;for(n=t;;){if(r=null!=n.methods?n.methods[e]:void 0,null!=r)break;if(!(n=n._parent))break}return r},function(){function n(n,r){null==n&&(n={}),this._parent=r,this.scope=new t.Scope(n),this.methods=e.call(this,this.scope,this)}return n.prototype.renderAt=function(e,n){var r;return e=new t.Node(e).empty(),r={$root:e},_(this,this.scope,e,r,n)},n.prototype.render=function(e){var n;return n=new t.Node(document.createElement("div")),this.renderAt(n,e),n},n}()},window.casua=t}).call(this);